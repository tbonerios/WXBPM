<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
 <link rel="icon" type="image/png" href="assets/img/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>WX BPM Landing Page</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
    <!-- CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/style.css" rel="stylesheet" />

    <link href="https://openweathermap.org/themes/openweathermap/assets/vendor/owm/css/openweathermap-widget-left.min.css" rel="stylesheet">
   

  </head>

<body class="landing-page">
    <!-- Navbar -->
    <nav class="navbar navbar-toggleable-md bg-primary fixed-top navbar-transparent " color-on-scroll="500">
        <div class="container">
         
            <div class="collapse navbar-collapse justify-content-end" id="navigation" data-nav-image="assets/img/blurred-image-1.jpg">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" rel="tooltip" title="Follow us on Twitter" data-placement="bottom" href="https://twitter.com/?lang=en" target="_blank">
                            <i class="fa fa-twitter"></i>
                            <p class="hidden-lg-up">Twitter</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" rel="tooltip" title="Like us on Facebook" data-placement="bottom" href="https://www.facebook.com/" target="_blank">
                            <i class="fa fa-facebook-square"></i>
                            <p class="hidden-lg-up">Facebook</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" rel="tooltip" title="Follow us on Instagram" data-placement="bottom" href="https://www.instagram.com/" target="_blank">
                            <i class="fa fa-instagram"></i>
                            <p class="hidden-lg-up">Instagram</p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- End Navbar -->
    <div class="wrapper">
        <div class="page-header page-header-small">
            <div class="page-header-image" data-parallax="true" style="background-image: url('assets/img/bg6.jpg');">
            </div>
            <div class="container">
                <div class="content-center">
                    <h1 class="title">Welcome to WX BPM</h1>
                    <h2 class="title2">Weather Beats Per Minute. Music that reflects the weather in your city or the city of your choice.</h2>
                    <div class="text-center">
                        <a href="#pablo" class="btn btn-primary btn-icon  btn-icon-mini">
                            <i class="fa fa-facebook-square"></i>
                        </a>
                        <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="#pablo" class="btn btn-primary btn-icon  btn-icon-mini">
                            <i class="fa fa-google-plus"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

                <div class="col-md-12">
                  <div class="city"></div>
                 <!--  <div class="wind"></div> -->
                <!--   <div class="humidity"></div> -->
                  <div class="temp"></div>
                  <div class="weather"></div>
                  <div id="player"></div>
                  <form>Zip Code: <input type="text" name="zipcode" id="zipcode">
                  <input type="submit" value="Submit" id="submit">
                  </form>


        <div class="section section-about-us">
            <div class="container">
                <div class="row">
                    <div class="col-md-8 offset-md-2 text-center">
                        <h2 class="title">Who we are?</h2>
                        <h5 class="description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut sollicitudin, lorem quis cursus aliquet, elit magna egestas arcu, vitae volutpat mauris felis et sem. Phasellus lorem purus, blandit vitae urna ut, pulvinar sagittis nulla. </h5>
                    </div>
                </div>
                <div class="separator separator-primary"></div>
                <div class="section-story-overview">
                    <div class="row">
                       
                        
                        <div class="col-md-5">
                         
                            <h3>Music and Weather: why we put them together</h3>
                            <p>TLorem ipsum dolor sit amet, consectetur adipiscing elit. Ut sollicitudin, lorem quis cursus aliquet, elit magna egestas arcu, vitae volutpat mauris felis et sem. Phasellus lorem purus, blandit vitae urna ut, pulvinar sagittis nulla. Nunc convallis, mi id congue ullamcorper, augue urna condimentum nulla, at facilisis ex tellus malesuada nunc. Mauris dictum egestas odio, aliquam pharetra dolor laoreet vitae. Phasellus pharetra eu est porta rhoncus. 
                            </p>
                            <p>
                              Interdum et malesuada fames ac ante ipsum primis in faucibus. Integer mollis, justo non finibus dignissim, nisl ante pharetra erat, ut tincidunt erat risus eu tellus. Curabitur at fermentum sem. Maecenas quam justo, pellentesque eu ornare at, consequat ut ante. Quisque eu enim ex. Etiam sit amet enim in purus fermentum suscipit nec quis tellus. Cras est nibh, porta vel varius vitae, posuere nec diam.
                            </p>
                            <p>Mauris dictum egestas odio, aliquam pharetra dolor laoreet vitae. Phasellus pharetra eu est porta rhoncus. Vestibulum facilisis vel mauris in luctus. Nunc feugiat porttitor mi ut tristique. Interdum et malesuada fames ac ante ipsum primis in faucibus. Integer mollis, justo non finibus dignissim, nisl ante pharetra erat, ut tincidunt erat risus eu tellus. Curabitur at fermentum sem. Maecenas quam justo, pellentesque eu ornare at, consequat ut ante.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section section-team text-center ">
            <div class="container">
                <h2 class="title">Here is our team</h2>
                <div class="team">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="team-player">
                                <img src="assets/img/djSmileyFace.jpg" alt="Thumbnail Image" class="rounded-circle img-fluid img-raised">
                                <h4 class="title">A.K.</h4>
                                <p class="category text-primary">The Brain</p>
                                <p class="description">You can write here details about one of your team members. You can give more details about what they do. Feel free to add some
                                    <a href="#">links</a> for people to be able to follow them outside the site.</p>
                                <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini"><i class="fa fa-twitter"></i></a>
                                <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini"><i class="fa fa-instagram"></i></a>
                                <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini"><i class="fa fa-facebook-square"></i></a>
                            </div>
                        </div>
                         <div class="col-md-3">
                            <div class="team-player">
                                <img src="assets/img/djSmileyFace.jpg" alt="Thumbnail Image" class="rounded-circle img-fluid img-raised">
                                <h4 class="title">Stephanie</h4>
                                <p class="category text-primary">Marketing Guru</p>
                                <p class="description">You can write here details about one of your team members. You can give more details about what they do. Feel free to add some
                                    <a href="#">links</a> for people to be able to follow them outside the site.</p>
                                <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini"><i class="fa fa-twitter"></i></a>
                                <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini"><i class="fa fa-instagram"></i></a>
                                <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini"><i class="fa fa-facebook-square"></i></a>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="team-player">
                                <img src="assets/img/djSmileyFace.jpg" alt="Thumbnail Image" class="rounded-circle img-fluid img-raised">
                                <h4 class="title">Tyrone</h4>
                                <p class="category text-primary">DJ</p>
                                <p class="description">You can write here details about one of your team members. You can give more details about what they do. Feel free to add some
                                    <a href="#">links</a> for people to be able to follow them outside the site.</p>
                                <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini"><i class="fa fa-twitter"></i></a>
                                <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini"><i class="fa fa-linkedin"></i></a>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="team-player">
                                <img src="assets/img/djSmileyFace.jpg" alt="Thumbnail Image" class="rounded-circle img-fluid img-raised">
                                <h4 class="title">Tony</h4>
                                <p class="category text-primary">Designer</p>
                                <p class="description">You can write here details about one of your team members. You can give more details about what they do. Feel free to add some
                                    <a href="#">links</a> for people to be able to follow them outside the site.</p>
                                <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini"><i class="fa fa-google-plus"></i></a>
                                <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini"><i class="fa fa-youtube-play"></i></a>
                                <a href="#pablo" class="btn btn-primary btn-icon btn-icon-mini"><i class="fa fa-twitter"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

 
    </div>
</body>
<!--   Core JS Files   -->
<script src="assets/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
<script src="assets/js/core/tether.min.js" type="text/javascript"></script>
<script src="assets/js/core/bootstrap.min.js" type="text/javascript"></script>
<script src = 'https://openweathermap.org/themes/openweathermap/assets/vendor/owm/js/d3.min.js'></script>


<!-- Control Center for Now Ui Kit: parallax effects, scripts for the example pages etc -->
<script src="assets/js/logic.js" type="text/javascript"></script>
<script src = "https://openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js"></script>

<script type="text/javascript">
    
    var Latitude;
    var Longitude;
    var APIKey = "166a433c57516f51dfab1f7edaed8413";
    var weather;
    var temp;
    var videoselect;
    var clouds = "P-eAx3Dxpj4";
    var zipcode;




    function getLocation(){
      console.log(navigator.geolocation)
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition,decline);
        //return true;
      } else {
        console.log("fuck u")
      }
    };

    function decline(){
      console.log("decline");
      $("#submit").on("click", function(){
        event.preventDefault();
        zipcode = $("#zipcode").val().trim();
        console.log(zipcode);
        doSomething();

      });
    };


    function showPosition(position) {
      Latitude = position.coords.latitude 
      Longitude = position.coords.longitude; 
      console.log(Latitude, Longitude);

      doSomething();
    };

    getLocation();

    function doSomething(){
      console.log(zipcode);
      if(typeof zipcode !== "undefined"){
        var queryURLlatlong = "http://api.openweathermap.org/data/2.5/weather?zip=" + zipcode + ",us&APPID="+APIKey;
        $.ajax({
          url:queryURLlatlong,
          method: "GET"
        }).done(function(response){
          console.log(queryURLlatlong);
          $(".city").text(response.name); 
          weather = response.weather[0].main;   
          $(".weather").text(weather);   
          temp = ((response.main.temp)* (9/5) - 459.67).toFixed(2);
          $(".temp").text(temp + "F");
          

          var tag = document.createElement('script');

          tag.src = "https://www.youtube.com/iframe_api";
          var firstScriptTag = document.getElementsByTagName('script')[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
          console.log(weather);

//weather codes
          if(weather == "Clouds"){
            videoselect = "P-eAx3Dxpj4";
          };
          if(weather == "Clear"){
            videoselect = "lJJQEQJoc3s";
          }

          });

        
        var player;
            function onYouTubeIframeAPIReady() {
              player = new YT.Player('player', {
                height: '390',
                width: '640',
                videoId: videoselect,
                events: {
                  'onReady': onPlayerReady,
                  'onStateChange': onPlayerStateChange
                }
              });
            }

            // 4. The API will call this function when the video player is ready.
            function onPlayerReady(event) {
              event.target.playVideo();
            }

            // 5. The API calls this function when the player's state changes.
            //    The function indicates that when playing a video (state=1),
            //    the player should play for six seconds and then stop.
            var done = false;
            function onPlayerStateChange(event) {
              if (event.data == YT.PlayerState.PLAYING && !done) {
                setTimeout(stopVideo, 6000);
                done = true;
              }
            }
            function stopVideo() {
              player.stopVideo();
            };


      }
      else{
        console.log("zip is blank");
        var queryURLlatlong = "http://api.openweathermap.org/data/2.5/weather?lat="+Latitude+"&lon="+Longitude+"&APPID="+APIKey;
        $.ajax({
          url:queryURLlatlong,
          method: "GET"
        }).done(function(response){
          console.log(queryURLlatlong);
          $(".city").append(response.name); 
          weather = response.weather[0].main;   
          $(".weather").append(weather);   
          temp = ((response.main.temp)* (9/5) - 459.67).toFixed(2);
          $(".temp").append(temp + "F");
          

          var tag = document.createElement('script');

          tag.src = "https://www.youtube.com/iframe_api";
          var firstScriptTag = document.getElementsByTagName('script')[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
          console.log(weather);

//weather codes
          if(weather == "Clouds"){
            videoselect = "P-eAx3Dxpj4";
          }

          if(weather == "Clear"){
            videoselect = "lJJQEQJoc3s";
          }

          });
        };

        };

        var player;
            function onYouTubeIframeAPIReady() {
              player = new YT.Player('player', {
                height: '390',
                width: '640',
                videoId: videoselect,
                events: {
                  'onReady': onPlayerReady,
                  'onStateChange': onPlayerStateChange
                }
              });
            }

            // 4. The API will call this function when the video player is ready.
            function onPlayerReady(event) {
              event.target.playVideo();
            }

            // 5. The API calls this function when the player's state changes.
            //    The function indicates that when playing a video (state=1),
            //    the player should play for six seconds and then stop.
            var done = false;
            function onPlayerStateChange(event) {
              if (event.data == YT.PlayerState.PLAYING && !done) {
                setTimeout(stopVideo, 6000);
                done = true;
              }
            }
            function stopVideo() {
              player.stopVideo();
            };






</script>


</html>